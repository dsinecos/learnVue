<!DOCTYPE html>
<html>

<head>
  <title>Welcome to Vue</title>
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
</head>

<body>
  <div id="app">
    <img src="https://vuejs.org/images/logo.png" alt="Vue logo">
    <h1 @click="bhondu" title="Thandu Thandu Thanduuuuuuuuuuuuu">
      {{ ghantu }}
    </h1>
    <ul>
      <li>
        To learn more about Vue, visit
        <a :href="docsURL" target="_blank">
          {{ humanizeURL(docsURL) }}
        </a>
      </li>
      <li>
        For live help with simple questions, check out
        <a :href="gitterURL" target="_blank">
          the Gitter chat
        </a>
      </li>
      <li>
        For more complex questions, post to
        <a :href="forumURL" target="_blank">
          the forum
        </a>
      </li>
    </ul>
  </div>

  <script>
    
    /*
    var xhttp = new XMLHttpRequest();
    var data = "username=Bruce&password=Wayne";
    xhttp.open("POST", "http://localhost:2346/");
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    //xhttp.setRequestHeader("cache-control", "no-cache");
    xhttp.send(data);

    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        // Typical action to be performed when the document is ready:
        console.log(xhttp.response);
        console.log("This is the response from the dailyreview app server " + xhttp.responseText);
        console.log(typeof xhttp.response);
        var objectResponse = JSON.parse(xhttp.response);
        console.log(objectResponse);
        if(typeof objectResponse.redirect === 'string') {
          window.location = objectResponse.redirect;
        }
        //console.log(typeof objectResponse);
      }
    }
    */

       
    
    new Vue({
      el: '#app',
      data: {
        ghantu: "Thandu",
        greeting: 'Welcome to your Vue.js app!',
        docsURL: 'http://vuejs.org/guide/',
        gitterURL: 'https://gitter.im/vuejs/vue',
        forumURL: 'http://forum.vuejs.org/'
      },
      methods: {
        humanizeURL: function (url) {
          return url
            .replace(/^https?:\/\//, '')
            .replace(/\/$/, '')
        },
        bhondu: function () {
          var self = this;

          //console.log("This just inside the function" + JSON.stringify(this, null, "  "));
          if (this.ghantu === 'Thandu') {

            var xhttp = new XMLHttpRequest();
            xhttp.open("POST", "http://localhost:2347/");
            xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            
            xhttp.onload = function () {
              if (this.readyState == 4 && this.status == 200) {
                // Typical action to be performed when the document is ready:
                console.log(xhttp.response);
                //console.log(typeof xhttp.response);
                //var objectResponse = JSON.parse(xhttp.response);
                //console.log(objectResponse);
                //console.log(typeof objectResponse);
                //console.log("This inside inside the function " + JSON.stringify(this, null,  "  "));
                return self.ghantu = "Hoye";
              }
            };
            xhttp.send("username=Bruce&password=Wayne");

          } else {
            return this.ghantu = "Thandu";
          }

        }

      }
    })
  </script>
</body>

</html>